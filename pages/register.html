<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Register</title>

	<style>
		#home {
			width: 30%;
			height:400px;
			margin: auto; 
			margin-top:6%; 
			box-shadow: 0 0 10px;
			position: relative;
			background-color: white;
			padding-top: 1px;
		}

		.value {
			width: 70%;
			height: 25px;
			border: none;
			/* border-bottom: 1px solid black; */
			border: 1px solid cadetblue;
			margin-top: 2%;
			padding-left: 2%;
			font-size: 14px;
			margin-left: 15%;
		}

		#button {
			width: 50%;
			height:30px;
			margin-top: 2%;
			margin-left: 25%;
			font-size: 14px;
			background-color: #012031db;
			border: 1px solid #012031db;
			/* box-shadow: 0 0 10px; */
			/* margin-top: 7%; */
			color: white;
		}

		h1 {
			text-align: center;
		}

		 body { 
			background-image: url("./../assets/img/16692.jpg");
			background-repeat: no-repeat;
			background-size: 100%;
			background-attachment: fixed; 
			width: 100%;
			height: 100%;
		}
		#checkbox{
			position: absolute;
    		left: 14%;
			margin-top: 3%;
		}
		#text1{
			/* border: 1px solid #012031db; */
			margin-left: 15%;
			margin-top: 1%;
			color: red;
		}
		#text2{
			/* border: 1px solid #012031db;  */
			margin-left: 15%;
			margin-top: 1%;
			color: red;
		}
	</style>



</head>

<body>


	<div id = "home">
		<h1>Welcome</h1>
		<form onsubmit="submitHandler()">
			<input class="value" type="text" placeholder="User name" required id="name"  pattern="[A-Za-z]{3,16}" title="minimum 3 char maximum 16 char"><br>
			<input class="value" type="text" placeholder="Email ID" required id="mail" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" title = "please include an '@' in the email address"><br>
			<div id = "text1"></div>
			<input class="value" type="password" placeholder="Password"  maxlength="15" required id="checkpassword" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Must contain at least one  number and one uppercase and lowercase letter, and at least 8 or more characters "> <br>
			<input class="value" type="password" placeholder="confirm Password" maxlength="15" required
				id="cpassword"><br>
			<div id = "text2"></div>
			<input type = "checkbox"  id = "checkbox" onclick="showPassword()">
			<input id="button" type="submit" placeholder="Register" value="Register now" required>
			
		</form>
	</div>
	<script>
		function showPassword(){
			let check1 = document.getElementById("checkpassword");
			let check2 = document.getElementById("cpassword");
			if(check1.type === "password"){

				check1.type = "text";
			}
			else if(check1 === "text"){
				document.getElementById('password').type="password";
			}
			if(check2.type === "password"){
				check2.type = "text";
			}
			
			
			else if(check2 === "text"){
				document.getElementById('password').type="password";
			}
			
			
			
		}
		let userlist = [];
		function onPageLoad(){
			let listValue = JSON.parse(localStorage.getItem("list"));
			if(listValue != null){
				userlist = listValue;
			}
		}
		onPageLoad();

		function submitHandler() {
			event.preventDefault();
			let name = document.getElementById("name").value;
			let mail = document.getElementById("mail").value;
			let password = document.getElementById("checkpassword").value;
			let cpassword = document.getElementById("cpassword").value;
			let emailId = isEmailExist(mail);
			if(password != cpassword){
				//alert("password invalid");
				document.getElementById("text2").innerText = "password invalid";
			}
			else if(emailId){
				//alert("this email already exist");
				document.getElementById("text1").innerText = "this email already exist";
			} 
			else{
				let value = {
					"name": name,
					"email": mail,
					"password": password,
					"confirm password": cpassword
				}
				
				userlist.push(value);
				let value1 = JSON.stringify(userlist);
				console.log(value1);
				localStorage.setItem("list", value1);
				window.location.href = "login.html";
			}

		}


		// this function will return true or false
		// this function will take an email as input
		function isEmailExist(inputEmail) {
			console.group(isEmailExist)
			let isExist = false;
			for (let i = 0; i < userlist.length; i++) {
				if (inputEmail == userlist[i].email) {
					isExist = true;
					break;
				}
			}
			console.groupEnd(isEmailExist)
			return isExist;
		}

	</script>

</body>

</html>






